<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Javascript Concepts</title>
</head>
<body>
    <script>
        // iterables and iterators
        // javascript provides a protocol to iterate over data structures.
        // this protocol defines how these data structures are iterated over using the for..of loop

        // the protocol is splitted into 2: 1. iterable and 2. iterator
        // the iterable protocol mentions that an iterable should have the Symbol.iterator key

        // what is iterables?
        /*
            the data structures that have the Symbol.iterator() method are called iterables. ex., arrays, strings, sets etc., 
        */

        // what is iterator?
        /*
            an iterator is an object that is returned by the Symbol.iterator() method.
            the iterator protocol provides the next() method to access each element of the iterable (data structure) one at a time
        */

        // declaration of an array
        const arr = [1, 2, 3];

        // calling the Symbol.iterator() method
        const arrIterator = arr[Symbol.iterator]();

        // gives array iterator
        console.log(arrIterator);

        const str = "hello";

        const strIterator = str[Symbol.iterator]();

        console.log(strIterator);

        // iterate through iterables
       const number = [1, 2, 3];
       
       for(let n of number) {
           console.log(n);
       }

       for(let n of number[Symbol.iterator]()) {
           console.log(n);
       }

       const str2 = "world";

       for(let n of str2[Symbol.iterator]()) {
           console.log(n);
       }

       // the next() method
       /*
        the iterator object has a next() method that returns the 'next' item in the sequence. the next() method contains two properties: value and done

        value: the value property can be of any data type and represents the current value in the sequence
        
        done: the property is a boolean value that indicates whether the iteration is complete or not.  
       */

       const arr1 = ['h', 'e', 'o', 'w', 'm'];

       let arr1Iterator = arr1[Symbol.iterator]();

       console.log(arr1Iterator.next());
       console.log(arr1Iterator.next());
       console.log(arr1Iterator.next());
       console.log(arr1Iterator.next());
       console.log(arr1Iterator.next());
       console.log(arr1Iterator.next());
       console.log(arr1Iterator.next());

       // user defined iterator
       // can work with next()


       const arr2 = ['m', 'o', 'w', 'f', 'c'];


       function displayElement(arr) {
        // to update the iteration
        let n = 0;

        return {
            // implementation the next() function
            next() {
                if(n < arr.length) {
                    return {
                        value: arr[n++], 
                        done: false
                    }
                }

                return {
                    value: undefined, 
                    done: true
                }
            }
        }
       }

       const arr2Iterator = displayElement(arr2);

       console.log(arr2Iterator.next());
       console.log(arr2Iterator.next());
       console.log(arr2Iterator.next());
       console.log(arr2Iterator.next());
       console.log(arr2Iterator.next());

    </script>
</body>
</html>